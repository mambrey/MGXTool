<!DOCTYPE html>
<html>
<head>
    <title>Check Email in LocalStorage</title>
</head>
<body>
    <h1>Checking Relationship Owner Emails</h1>
    <pre id="output"></pre>
    <script>
        const owners = JSON.parse(localStorage.getItem('crm-relationship-owners') || '[]');
        const output = document.getElementById('output');
        
        output.textContent = 'Relationship Owners:\n\n';
        owners.forEach((owner, index) => {
            output.textContent += `${index + 1}. ${owner.name}\n`;
            output.textContent += `   Email: "${owner.email}"\n`;
            output.textContent += `   Email length: ${owner.email?.length || 0}\n`;
            output.textContent += `   Has newline: ${owner.email?.includes('\n') ? 'YES âŒ' : 'NO âœ“'}\n`;
            output.textContent += `   Cleaned email: "${owner.email?.trim().replace(/[\r\n\t]/g, '')}"\n\n`;
        });
        
        // Auto-clean
        if (owners.some(o => o.email?.includes('\n'))) {
            output.textContent += '\nðŸ”§ CLEANING EMAILS NOW...\n\n';
            const cleaned = owners.map(o => ({
                ...o,
                email: o.email?.trim().replace(/[\r\n\t]/g, '') || ''
            }));
            localStorage.setItem('crm-relationship-owners', JSON.stringify(cleaned));
            output.textContent += 'âœ… EMAILS CLEANED! Please refresh your CRM page.\n';
        } else {
            output.textContent += 'âœ… All emails are already clean!\n';
        }
    </script>
</body>
</html>
